@if(!allProducts()) {

<app-loading-spinner />

} @else {
<section class="my-4">
  <app-header-title [title]="'All Products'" />

  <div class="my-10">
    <div class="relative mb-4 capitalize">
      <label for="search" class="leading-7 text-4xl text-gray-600"
        >search products</label
      >
      <input
        (input)="searchText = $event.target.value"
        type="search"
        id="search"
        name="search"
        placeholder="search by product name..."
        class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
      />
    </div>
  </div>

  <div class="grid grid-cols-3 gap-4">
    @for(prod of allProducts()! | productsSearch : searchText |paginate: {
    itemsPerPage: itemsPerPage, currentPage: page , totalItems: totalItems } ;
    track prod._id) {
    <app-products-card [prod]="prod" />
    }
  </div>
</section>

<div class="flex justify-center my-10">
  @defer () {
  <pagination-controls
    [routerLink]="['/products', page]"
    (pageChange)="pageChanged($event)"
  />
  }
</div>

}
